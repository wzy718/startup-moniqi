# 数值类型系统草稿

> 本文档定义游戏中所有数值类型、计算公式、初始值和变化规则

---

## 1. 玩家核心属性

### 1.1 资产类

| 数值名 | 类型 | 初始值 | 范围 | 说明 |
|--------|------|--------|------|------|
| `cash` | 整数 | 100,000 | 0 ~ ∞ | 游戏币/现金，归0则破产 |
| `weekly_income` | 整数 | 0 | -∞ ~ ∞ | 每周净收入（收入-支出） |
| `total_asset` | 整数 | 100,000 | 0 ~ ∞ | 总资产（现金+店铺估值+库存） |
| `debt` | 整数 | 0 | 0 ~ ∞ | 负债（贷款等） |

### 1.2 状态类

| 数值名 | 类型 | 初始值 | 范围 | 说明 |
|--------|------|--------|------|------|
| `stress` | 整数 | 20 | 0 ~ 100 | 压力值，持续满值(100)会导致死亡 |
| `stress_max_weeks` | 整数 | - | - | 压力满值持续周数，达到阈值(如4周)触发死亡 |
| `health` | 整数 | 100 | 0 ~ 100 | 健康值，影响疾病概率和工作效率 |
| `age` | 整数 | 25 | 18 ~ 100 | 年龄，每52周+1岁，到达上限去世 |
| `energy` | 整数 | 100 | 0 ~ 100 | 精力值，影响每周可做的事情数量 |

### 1.3 社会属性

| 数值名 | 类型 | 初始值 | 范围 | 说明 |
|--------|------|--------|------|------|
| `reputation` | 整数 | 50 | 0 ~ 100 | 社会声望，影响贷款额度、招聘难度 |
| `relationship_status` | 枚举 | single | - | 婚恋状态：single/dating/married/divorced |
| `has_children` | 布尔 | false | - | 是否有孩子，影响继承系统 |
| `children_count` | 整数 | 0 | 0 ~ 5 | 孩子数量 |
| `living_expense` | 整数 | 2000 | 1000 ~ ∞ | 每周生活费，随生活状态变化 |

---

## 2. 人物性格系统（MBTI）

> 开局时用户可以**手动输入 MBTI 类型**或**随机生成**，影响整个游戏的事件触发和数值变化

### 2.1 MBTI 输入方式

| 方式 | 说明 |
|------|------|
| 手动输入 | 用户已知自己的 MBTI，直接选择 4 个字母 |
| 随机生成 | 系统随机生成一个 MBTI 类型 |
| 简易测试 | （可选）4道快速问题确定 E/I、S/N、T/F、J/P |

### 2.2 MBTI 四维度定义

| 维度 | 选项A | 选项B | 影响领域 |
|------|-------|-------|----------|
| 能量来源 | E（外向） | I（内向） | 社交、招聘、谈判 |
| 信息获取 | S（实感） | N（直觉） | 风险判断、机会发现 |
| 决策方式 | T（思考） | F（情感） | 员工管理、客户关系 |
| 生活方式 | J（判断） | P（知觉） | 计划性、应变能力 |

### 2.3 MBTI 16 种性格类型

#### 分析家组（NT）

| MBTI | 名称 | 描述 | 初始加成 | 特殊效果 |
|------|------|------|----------|----------|
| `INTJ` | 建筑师 | 战略思维，独立自主 | cash+15000, stress+5 | 长期规划收益+15%，但社交事件成功率-10% |
| `INTP` | 逻辑学家 | 善于分析，追求创新 | energy+10 | 调研成本-30%，揭示隐藏属性更准确 |
| `ENTJ` | 指挥官 | 天生领导，果断决策 | reputation+15, cash+10000 | 员工效率+15%，但员工离职时损失更大 |
| `ENTP` | 辩论家 | 思维敏捷，喜欢挑战 | stress-10 | 谈判议价+20%，但容易触发争议事件 |

#### 外交家组（NF）

| MBTI | 名称 | 描述 | 初始加成 | 特殊效果 |
|------|------|------|----------|----------|
| `INFJ` | 提倡者 | 理想主义，洞察人心 | health+10 | 员工忠诚度+20%，客户好评率+10% |
| `INFP` | 调停者 | 富有同情，追求意义 | stress-5, health+5 | 压力恢复速度+30%，但财务决策收益-10% |
| `ENFJ` | 主人公 | 魅力领袖，激励他人 | reputation+20 | 招聘成功率+25%，员工士气上限+10 |
| `ENFP` | 竞选者 | 热情洋溢，创意无限 | energy+15, stress-5 | 营销效果+20%，但成本控制-10% |

#### 哨兵组（SJ）

| MBTI | 名称 | 描述 | 初始加成 | 特殊效果 |
|------|------|------|----------|----------|
| `ISTJ` | 物流师 | 可靠务实，一丝不苟 | cash+20000 | 成本控制+15%，卫生评分+10，但创新事件收益-15% |
| `ISFJ` | 守卫者 | 尽职尽责，温暖体贴 | health+10, stress-5 | 员工满意度+15%，老顾客复购率+20% |
| `ESTJ` | 总经理 | 高效执行，组织能力强 | cash+10000, reputation+10 | 多店管理效率+20%，但灵活应变-15% |
| `ESFJ` | 执政官 | 热心助人，重视和谐 | reputation+15 | 社区关系+25%，员工士气恢复+20% |

#### 探险家组（SP）

| MBTI | 名称 | 描述 | 初始加成 | 特殊效果 |
|------|------|------|----------|----------|
| `ISTP` | 鉴赏家 | 冷静观察，动手能力强 | energy+10 | 设备维修成本-30%，危机处理+20% |
| `ISFP` | 探险家 | 灵活艺术，享受当下 | stress-10, health+5 | 店铺装修吸引力+15%，但长期规划收益-10% |
| `ESTP` | 企业家 | 精力充沛，敢于冒险 | cash+15000, stress-5 | 高风险事件收益+25%，但损失也+15% |
| `ESFP` | 表演者 | 活力四射，社交达人 | reputation+20, energy+10 | 促销活动效果+30%，但日常运营效率-10% |

### 2.4 四维度独立影响

> 除了16种完整性格的效果，每个维度字母也有独立加成

| 维度 | 效果 |
|------|------|
| **E（外向）** | 社交事件成功率+10%，招聘速度+1周，但独处时压力恢复-20% |
| **I（内向）** | 独处时压力恢复+20%，分析判断准确+10%，但社交事件成功率-10% |
| **S（实感）** | 日常运营效率+10%，成本控制+5%，但发现新机会概率-10% |
| **N（直觉）** | 发现新机会概率+15%，创新事件收益+10%，但细节失误率+5% |
| **T（思考）** | 财务决策收益+10%，谈判理性+15%，但员工关系维护-10% |
| **F（情感）** | 员工忠诚度+10%，客户满意度+10%，但可能做出非理性让步 |
| **J（判断）** | 计划执行效率+15%，长期收益+10%，但突发事件应变-15% |
| **P（知觉）** | 突发事件应变+20%，灵活调整+15%，但长期计划收益-10% |

### 2.5 性格影响因子（代码）

```javascript
// MBTI 维度影响系数
const mbti_dimension_modifier = {
  // 能量来源
  E: { social_success: 1.1, hire_speed: 1, alone_stress_recovery: 0.8 },
  I: { social_success: 0.9, alone_stress_recovery: 1.2, analysis_accuracy: 1.1 },
  
  // 信息获取
  S: { daily_efficiency: 1.1, cost_control: 1.05, opportunity_discovery: 0.9 },
  N: { opportunity_discovery: 1.15, innovation_reward: 1.1, detail_error: 1.05 },
  
  // 决策方式
  T: { financial_decision: 1.1, negotiate_rational: 1.15, staff_relation: 0.9 },
  F: { staff_loyalty: 1.1, customer_satisfaction: 1.1, irrational_concession: 1.1 },
  
  // 生活方式
  J: { plan_efficiency: 1.15, long_term_profit: 1.1, emergency_response: 0.85 },
  P: { emergency_response: 1.2, flexibility: 1.15, long_term_profit: 0.9 }
}

// 根据 MBTI 组合计算最终影响
function getMBTIModifier(mbti) {
  // mbti = "INTJ" 等
  const modifiers = {}
  for (const letter of mbti) {
    Object.assign(modifiers, mbti_dimension_modifier[letter])
  }
  // 叠加特定组合的额外效果
  const combo_bonus = mbti_combo_bonus[mbti] || {}
  return { ...modifiers, ...combo_bonus }
}
```

### 2.6 MBTI 与事件关联

> 某些事件只对特定 MBTI 触发或有特殊选项

| 事件类型 | 相关 MBTI | 说明 |
|----------|-----------|------|
| 员工矛盾调解 | F 型优势 | F 型有额外和解选项 |
| 投资机会判断 | N 型优势 | N 型能看到隐藏收益 |
| 危机公关 | E 型优势 | E 型处理速度更快 |
| 成本审计 | S/T 型优势 | 发现更多节省空间 |
| 突发状况 | P 型优势 | 有更多灵活应对选项 |
| 长期合作谈判 | J 型优势 | 获得更好的长期条款 |

---

## 3. 店铺属性系统

### 3.1 店铺基础属性

| 数值名 | 类型 | 范围 | 说明 |
|--------|------|------|------|
| `shop_id` | 字符串 | - | 店铺唯一ID |
| `shop_type` | 枚举 | - | 店铺类型（见3.2） |
| `shop_name` | 字符串 | - | 店铺名称 |
| `operation_mode` | 枚举 | original/franchise | 原创/加盟 |
| `brand_id` | 字符串 | - | 加盟品牌ID（原创则为空） |
| `open_week` | 整数 | - | 开业的周数 |
| `shop_level` | 整数 | 1~10 | 店铺等级，影响收入上限 |

### 3.2 店铺类型定义

| 类型ID | 名称 | 启动成本 | 日常成本 | 收入潜力 | 上手难度 | 说明 |
|--------|------|----------|----------|----------|----------|------|
| `milk_tea` | 奶茶店 | 80,000~150,000 | 中 | 中高 | 低 | 年轻人最爱，竞争激烈 |
| `noodle` | 面馆 | 60,000~120,000 | 中 | 中 | 中 | 刚需品类，稳定客群 |
| `bbq` | 烧烤店 | 100,000~200,000 | 高 | 高 | 高 | 夜宵王者，季节波动大 |
| `cafe` | 咖啡店 | 120,000~250,000 | 中高 | 中高 | 中 | 文艺范，需要选址 |
| `snack` | 小吃店 | 30,000~80,000 | 低 | 低中 | 低 | 门槛低，流动性大 |
| `hotpot` | 火锅店 | 150,000~350,000 | 高 | 高 | 高 | 翻台率关键，资金要求高 |
| `bakery` | 烘焙店 | 100,000~200,000 | 中 | 中高 | 中高 | 技术门槛，保质期短 |
| `fast_food` | 快餐店 | 80,000~180,000 | 中 | 中 | 中 | 效率为王，标准化要求高 |

### 3.3 店铺经营数值

| 数值名 | 类型 | 范围 | 说明 |
|--------|------|------|------|
| `daily_customers` | 整数 | 0 ~ ∞ | 日均客流量 |
| `avg_ticket` | 整数 | 0 ~ ∞ | 客单价（元） |
| `daily_revenue` | 整数 | 0 ~ ∞ | 日营业额 = daily_customers × avg_ticket |
| `weekly_revenue` | 整数 | 0 ~ ∞ | 周营业额 = daily_revenue × 营业天数 |
| `gross_margin` | 浮点 | 0 ~ 1 | 毛利率 |
| `weekly_profit` | 整数 | -∞ ~ ∞ | 周净利润 |
| `shop_rating` | 浮点 | 1.0 ~ 5.0 | 店铺评分（影响客流） |
| `hygiene_score` | 整数 | 0 ~ 100 | 卫生评分（影响检查事件） |

### 3.4 店铺成本结构

| 数值名 | 类型 | 说明 |
|--------|------|------|
| `rent` | 整数 | 月租金 |
| `labor_cost` | 整数 | 月人工成本 |
| `material_cost` | 整数 | 月原材料成本（与营业额挂钩） |
| `utility_cost` | 整数 | 月水电燃气 |
| `platform_fee` | 整数 | 月平台费用（外卖抽成等） |
| `royalty_fee` | 整数 | 月加盟费/管理费（加盟店） |
| `marketing_cost` | 整数 | 月营销费用 |
| `other_cost` | 整数 | 月其他费用 |
| `total_monthly_cost` | 整数 | 月总成本 |

---

## 4. 门面属性系统

> 开局选择门面时随机生成

### 4.1 门面基础属性

| 数值名 | 类型 | 范围 | 可见性 | 说明 |
|--------|------|------|--------|------|
| `location_type` | 枚举 | - | 可见 | 位置类型（见4.2） |
| `area` | 整数 | 20~500 m² | 可见 | 面积 |
| `rent` | 整数 | 3000~50000 | 可见 | 月租金 |
| `deposit_months` | 整数 | 1~6 | 可见 | 押金月数 |
| `lease_years` | 整数 | 1~5 | 可见 | 租约年限 |
| `decoration_status` | 枚举 | - | 可见 | 装修状态：blank/simple/good |
| `foot_traffic` | 整数 | 1~100000 | **隐藏** | 真实人流量指数 |
| `foot_traffic_display` | 枚举 | - | 可见 | 人流量展示： 夯/顶级/人上人/NPC/拉完了（模糊） |
| `competition_index` | 整数 | 1~100 | **隐藏** | 周边竞争指数 |
| `landlord_attitude` | 整数 | 1~100 | **隐藏** | 房东态度（影响续约涨租） |
| `hidden_problem` | 枚举 | - | **隐藏** | 隐藏问题：none/leak/noise/smell/haunted |
| `growth_potential` | 整数 | 1~100 | **隐藏** | 区域发展潜力 |

### 4.2 位置类型定义

| 位置ID | 名称 | 租金系数 | 人流系数 | 特点 |
|--------|------|----------|----------|------|
| `mall` | 商场店 | 1.5 | 1.3 | 人流稳定，租金高，有营业时间限制 |
| `street` | 街边店 | 1.0 | 1.0 | 灵活度高，受天气影响 |
| `community` | 社区店 | 0.7 | 0.8 | 租金低，客群固定，复购率高 |
| `office` | 写字楼 | 1.2 | 1.1 | 工作日好，周末差，客单价高 |
| `school` | 学校周边 | 0.9 | 1.2 | 寒暑假冷清，学生消费力有限 |
| `station` | 车站/地铁 | 1.4 | 1.4 | 人流大但停留短，适合快餐 |
| `scenic` | 景区/商圈 | 1.6 | 1.5 | 节假日爆发，平日冷清 |

### 4.3 调研系统

| 调研方式 | 花费 | 时间消耗 | 可揭示属性 |
|----------|------|----------|------------|
| 蹲点观察 | 0 | 1周 | foot_traffic |
| 问周边商家 | 500 | 1周 | competition_index, landlord_attitude |
| 找中介打听 | 2000 | 0 | hidden_problem, growth_potential |
| 专业调研 | 5000 | 0 | 全部隐藏属性 |
| 看广告 | 广告 | 0 | 全部隐藏属性 |

---

## 5. 品牌/加盟系统

### 5.1 品牌属性

| 数值名 | 类型 | 范围 | 说明 |
|--------|------|------|------|
| `brand_id` | 字符串 | - | 品牌ID |
| `brand_name` | 字符串 | - | 品牌名称 |
| `brand_type` | 枚举 | - | 对应店铺类型 |
| `brand_tier` | 枚举 | S/A/B/C | 品牌档次 |
| `franchise_fee` | 整数 | 10000~500000 | 加盟费 |
| `royalty_rate` | 浮点 | 0~0.15 | 营业额抽成比例 |
| `monthly_fee` | 整数 | 0~10000 | 固定月费 |
| `brand_awareness` | 整数 | 1~100 | 品牌知名度 |
| `supply_chain_score` | 整数 | 1~100 | 供应链评分 |
| `training_quality` | 整数 | 1~100 | 培训质量 |
| `territory_protection` | 布尔 | - | 是否有区域保护 |
| `menu_freedom` | 整数 | 1~100 | 菜单自由度 |
| `support_level` | 整数 | 1~100 | 总部支持力度 |

### 5.2 加盟 vs 原创对比

| 维度 | 加盟 | 原创 |
|------|------|------|
| 启动成本 | 高（含加盟费） | 低 |
| 品牌效应 | 有（取决于品牌） | 无（需自建） |
| 经营自由度 | 低 | 高 |
| 供应链 | 总部提供 | 自己找 |
| 培训支持 | 有 | 无 |
| 持续费用 | 有（抽成+月费） | 无 |
| 风险 | 较低（有模式） | 较高（探索期） |

### 5.3 自建品牌系统

> 经营到一定阶段可创建自己的品牌

| 数值名 | 解锁条件 | 说明 |
|--------|----------|------|
| `can_create_brand` | 累计盈利 > 500,000 且 经营 > 52周 | 可以创建品牌 |
| `own_brand_level` | - | 自有品牌等级 1~10 |
| `franchisee_count` | - | 加盟商数量 |
| `franchise_income` | - | 加盟收入 |

---

## 6. 员工系统

### 6.1 员工基础属性

| 数值名 | 类型 | 范围 | 可见性 | 说明 |
|--------|------|------|--------|------|
| `staff_id` | 字符串 | - | - | 员工ID |
| `name` | 字符串 | - | 可见 | 姓名 |
| `position` | 枚举 | - | 可见 | 职位（见6.2） |
| `salary` | 整数 | 2000~20000 | 可见 | 期望月薪 |
| `skill` | 整数 | 1~100 | **部分** | 技能水平（显示为：差/中/良/优） |
| `experience` | 整数 | 0~20 | 可见 | 从业年限 |
| `loyalty` | 整数 | 1~100 | **隐藏** | 忠诚度 |
| `stability` | 整数 | 1~100 | **隐藏** | 稳定性（离职倾向） |
| `personality` | 枚举 | - | **隐藏** | 性格特征 |
| `hidden_skill` | 枚举 | - | **隐藏** | 隐藏技能/缺点 |

### 6.2 职位定义

| 职位ID | 名称 | 基础薪资范围 | 技能要求 | 说明 |
|--------|------|--------------|----------|------|
| `chef` | 厨师/调饮师 | 4000~12000 | 高 | 核心岗位，影响出品质量 |
| `waiter` | 服务员 | 3000~5000 | 低 | 影响服务评分 |
| `cashier` | 收银员 | 3000~5000 | 低 | 影响结账效率 |
| `cleaner` | 保洁 | 2500~4000 | 低 | 影响卫生评分 |
| `manager` | 店长 | 6000~15000 | 高 | 可托管店铺，降低玩家压力 |
| `delivery` | 配送员 | 4000~8000 | 中 | 自配送时需要 |

### 6.3 员工状态数值

| 数值名 | 类型 | 范围 | 说明 |
|--------|------|------|------|
| `morale` | 整数 | 0~100 | 士气，影响工作效率和离职率 |
| `fatigue` | 整数 | 0~100 | 疲劳度，过高会请假或离职 |
| `tenure_weeks` | 整数 | 0~∞ | 在职周数 |
| `performance` | 整数 | 0~100 | 绩效评分 |

### 6.4 招聘数值

| 数值名 | 说明 |
|--------|------|
| `hire_cost` | 招聘成本（中介费/广告费） |
| `hire_time` | 招聘耗时（周） |
| `applicant_quality` | 应聘者质量（受店铺声望、薪资影响） |

---

## 7. 外卖系统

### 7.1 外卖平台属性

| 数值名 | 类型 | 范围 | 说明 |
|--------|------|------|------|
| `platform_id` | 枚举 | meituan/eleme/douyin | 平台类型 |
| `is_active` | 布尔 | - | 是否开通 |
| `commission_rate` | 浮点 | 0.15~0.25 | 平台抽成比例 |
| `delivery_mode` | 枚举 | platform/self/hybrid | 配送方式 |
| `online_rating` | 浮点 | 1.0~5.0 | 线上评分 |
| `monthly_orders` | 整数 | 0~∞ | 月订单量 |
| `avg_delivery_time` | 整数 | 15~60 | 平均配送时间（分钟） |
| `promo_budget` | 整数 | 0~∞ | 月推广预算 |

### 7.2 外卖经营数值

| 数值名 | 计算公式 | 说明 |
|--------|----------|------|
| `delivery_revenue` | 订单量 × 客单价 | 外卖营业额 |
| `delivery_cost` | 营业额 × 抽成 + 包材 + 配送 | 外卖成本 |
| `delivery_profit` | 营业额 - 成本 | 外卖利润 |
| `delivery_ratio` | 外卖营业额 / 总营业额 | 外卖占比 |

---

## 8. 时间与事件系统

### 8.1 时间数值

| 数值名 | 类型 | 说明 |
|--------|------|------|
| `current_week` | 整数 | 当前周数（从1开始） |
| `current_year` | 整数 | 当前年份 |
| `season` | 枚举 | spring/summer/autumn/winter |
| `is_holiday` | 布尔 | 是否节假日 |
| `holiday_type` | 枚举 | 节日类型（影响客流） |

### 8.2 事件触发条件

```
event_trigger_conditions = {
  // 基于数值范围
  cash_range: [min, max],
  stress_range: [min, max],
  shop_rating_range: [min, max],
  
  // 基于状态
  required_flags: ["flag1", "flag2"],
  excluded_flags: ["flag3"],
  
  // 基于时间
  week_range: [min, max],
  season: ["summer", "winter"],
  
  // 基于店铺
  shop_type: ["milk_tea", "cafe"],
  operation_mode: "franchise",
  
  // 概率
  base_probability: 0.1
}
```

### 8.3 事件影响数值

| 影响类型 | 数值字段 | 说明 |
|----------|----------|------|
| 资金变化 | `delta_cash` | 正负皆可 |
| 压力变化 | `delta_stress` | 正负皆可 |
| 声望变化 | `delta_reputation` | 正负皆可 |
| 健康变化 | `delta_health` | 正负皆可 |
| 评分变化 | `delta_rating` | 正负皆可 |
| 员工士气 | `delta_morale` | 正负皆可 |
| 添加标记 | `adds_flags` | 事件链触发 |
| 移除标记 | `removes_flags` | 事件链控制 |

---

## 9. 继承系统

### 9.1 家庭数值

| 数值名 | 类型 | 范围 | 说明 |
|--------|------|------|------|
| `spouse_id` | 字符串 | - | 配偶ID |
| `spouse_support` | 整数 | 0~100 | 配偶支持度（影响压力恢复） |
| `family_expense` | 整数 | 0~∞ | 家庭支出增量 |

### 9.2 子女属性

| 数值名 | 类型 | 范围 | 说明 |
|--------|------|------|------|
| `child_id` | 字符串 | - | 子女ID |
| `child_age` | 整数 | 0~∞ | 子女年龄 |
| `child_personality` | 枚举 | - | 随机性格（继承时使用） |
| `child_interest` | 整数 | 0~100 | 对接班的兴趣 |
| `child_skill` | 整数 | 0~100 | 经营能力（可培养） |

### 9.3 继承条件

| 条件 | 数值要求 |
|------|----------|
| 触发年龄 | 玩家 age >= 60 |
| 有子女 | has_children = true |
| 子女成年 | child_age >= 18 |
| 子女意愿 | child_interest >= 50 |

### 9.4 继承后数值重置

| 数值 | 继承规则 |
|------|----------|
| `age` | 重置为子女年龄（18~25） |
| `personality` | 使用子女性格 |
| `cash` | 继承父辈现金的 80% |
| `stress` | 重置为 30 |
| `health` | 重置为 100 |
| 店铺 | 全部继承 |
| 员工 | 保留，但忠诚度-20 |
| 声望 | 继承 50% |

---

## 10. 世界事件系统

### 10.1 世界事件类型

| 事件ID | 名称 | 概率 | 影响范围 | 持续时间 | 说明 |
|--------|------|------|----------|----------|------|
| `pandemic` | 疫情 | 极低 | 全局 | 4~12周 | 堂食禁止，外卖爆发 |
| `earthquake` | 地震 | 极低 | 区域 | 1~4周 | 可能损坏店铺 |
| `economic_crisis` | 经济危机 | 低 | 全局 | 12~52周 | 消费力下降 |
| `food_scandal` | 食品安全丑闻 | 低 | 品类 | 4~8周 | 特定品类客流暴跌 |
| `competitor_entry` | 巨头入场 | 中 | 品类 | 永久 | 竞争加剧 |
| `policy_change` | 政策变化 | 中 | 全局 | 永久 | 如最低工资上调 |
| `alien_invasion` | 外星人入侵 | 彩蛋 | 全局 | ? | 特殊彩蛋事件 |

### 10.2 世界事件影响

| 事件 | 客流影响 | 成本影响 | 特殊效果 |
|------|----------|----------|----------|
| 疫情 | 堂食-80%, 外卖+50% | 防疫成本+ | 可能被强制关店 |
| 地震 | -50%~-100% | 维修成本 | 店铺损坏概率 |
| 经济危机 | -20%~-40% | - | 客单价下降 |
| 食品丑闻 | 特定品类-50% | - | 品类相关店铺受损 |

---

## 11. 成就系统数值

### 11.1 成就追踪数值

| 数值名 | 类型 | 说明 |
|--------|------|------|
| `total_revenue_earned` | 整数 | 累计营业额 |
| `total_profit_earned` | 整数 | 累计净利润 |
| `total_weeks_survived` | 整数 | 累计存活周数 |
| `total_shops_owned` | 整数 | 累计拥有店铺数 |
| `total_staff_hired` | 整数 | 累计雇佣员工数 |
| `total_events_faced` | 整数 | 累计经历事件数 |
| `bankruptcy_count` | 整数 | 破产次数 |
| `max_cash_reached` | 整数 | 现金峰值 |
| `max_shops_at_once` | 整数 | 同时拥有店铺峰值 |
| `generations_count` | 整数 | 传承代数 |

### 11.2 成就解锁示例

| 成就ID | 名称 | 条件 | 奖励 |
|--------|------|------|------|
| `first_profit` | 第一桶金 | 单周盈利 > 0 | 解锁新性格 |
| `millionaire` | 百万富翁 | cash >= 1,000,000 | 解锁新店铺类型 |
| `chain_owner` | 连锁大亨 | 同时 >= 3 家店 | 解锁加盟系统 |
| `survivor` | 老江湖 | 存活 >= 520周(10年) | 解锁继承系统 |
| `phoenix` | 浴火重生 | 破产后再次盈利 | 特殊称号 |
| `alien_friend` | 外星友人 | 触发外星人事件并存活 | 彩蛋结局 |

---

## 12. 排行系统数值

### 12.1 排行榜类型

| 排行榜 | 排序依据 | 说明 |
|--------|----------|------|
| 财富榜 | `total_asset` | 当前总资产排名 |
| 存活榜 | `total_weeks_survived` | 存活时间排名 |
| 传奇榜 | `generations_count` | 传承代数排名 |
| 周榜 | `weekly_profit` | 本周利润排名 |

### 12.2 排名奖励

| 排名 | 奖励 |
|------|------|
| Top 1 | 专属头衔 + 100广告跳过券 |
| Top 10 | 50广告跳过券 |
| Top 100 | 10广告跳过券 |

---

## 13. 数值公式汇总

### 13.1 收入计算

```
// 单店日营业额
daily_revenue = daily_customers × avg_ticket

// 单店周营业额
weekly_revenue = daily_revenue × open_days × season_modifier × holiday_modifier

// 外卖营业额
delivery_revenue = delivery_orders × delivery_avg_ticket

// 总周营业额
total_weekly_revenue = Σ(each_shop.weekly_revenue + each_shop.delivery_revenue)
```

### 13.2 成本计算

```
// 单店周成本
weekly_cost = (rent + labor_cost + utility_cost + royalty_fee + other_cost) / 4
            + material_cost × weekly_revenue
            + platform_fee × delivery_revenue

// 总周成本
total_weekly_cost = Σ(each_shop.weekly_cost) + living_expense + family_expense
```

### 13.3 利润计算

```
// 周净利润
weekly_profit = total_weekly_revenue × gross_margin - total_weekly_cost

// 现金变化
cash_delta = weekly_profit + event_delta_cash
```

### 13.4 压力计算

```
// 周压力变化
stress_delta = base_stress_change
             + (cash < 10000 ? 10 : 0)           // 缺钱焦虑
             + (staff_shortage ? 5 : 0)          // 缺人焦虑
             + (bad_rating ? 5 : 0)              // 差评焦虑
             + event_delta_stress                // 事件影响
             - (has_manager ? 5 : 0)             // 店长减压
             - (spouse_support / 10)             // 配偶减压
             
// 压力恢复（每周自然恢复）
natural_stress_recovery = 5 × (health / 100)

// 最终压力
stress = clamp(stress + stress_delta - natural_stress_recovery, 0, 100)
```

### 13.5 健康计算

```
// 周健康变化
health_delta = -1                                // 自然老化
             - (stress > 80 ? 2 : 0)            // 高压损耗
             - (age > 50 ? 1 : 0)               // 年龄加速
             + event_delta_health
             
// 疾病概率（每周检定）
illness_probability = (100 - health) / 500 + stress / 500
```

### 13.6 死亡判定

```
// 破产死亡
if (cash <= 0) trigger_death("bankruptcy")

// 压力死亡
if (stress >= 100) stress_max_weeks++
else stress_max_weeks = 0
if (stress_max_weeks >= 4) trigger_death("stress")

// 年龄死亡
if (age >= 85) {
  death_probability = (age - 85) × 0.1
  if (random() < death_probability) trigger_death("age")
}

// 疾病死亡
if (random() < illness_probability && health < 20) {
  trigger_death("illness")
}
```

---

## 14. 数值平衡参考

### 14.1 经济平衡目标

| 阶段 | 周数 | 目标现金 | 目标周利润 |
|------|------|----------|------------|
| 新手期 | 1~12 | 50,000~150,000 | -5,000~5,000 |
| 成长期 | 13~52 | 100,000~500,000 | 5,000~20,000 |
| 稳定期 | 53~156 | 300,000~2,000,000 | 15,000~50,000 |
| 扩张期 | 157+ | 1,000,000+ | 50,000+ |

---

## 15. 待确定事项

> 以下内容需要进一步讨论确定

- [ ] 初始启动资金具体数值
- [ ] 每种店铺类型的详细数值表
- [ ] 品牌数据库（加盟品牌列表）
- [ ] 事件池完整内容
- [ ] 成就完整列表
- [ ] 广告奖励具体数值
- [ ] 数值平衡测试与调整
- [ ] 多店经营时的玩家精力分配机制
- [ ] 继承系统的详细流程
- [ ] 世界事件的具体触发概率和影响数值
